{"ast":null,"code":"// // для работы с mobx\n// import { makeAutoObservable } from \"mobx\";\n\n// export default class UserStore {\n//   constructor() {\n//     this._isAuth = false; // _ - переменная изменяться не может\n//     this._user = {};\n//     makeAutoObservable(this);\n//   }\n\n//   // экшены - функции изменяющие состояние\n//   setIsAuth(bool) {\n//     this._isAuth = bool;\n//   }\n//   setUser(user) {\n//     this._user = user;\n//   }\n\n//   // для получения переменных из нашего состояния\n//   // это computed функции, которые вызываются только в том случае, если переменная используемая внутри была изменена (из appRouter)\n//   get isAuth() {\n//     return this._isAuth;\n//   }\n\n//   get user() {\n//     return this._user;\n//   }\n// }\n\nimport { makeAutoObservable } from \"mobx\";\nimport { login, registration, check_auth } from \"../http/userAPI\";\nclass UserStore {\n  constructor() {\n    this._isAuth = false; // _ - переменная изменяться не может\n    this._user = {};\n    makeAutoObservable(this);\n  }\n\n  // Функции для изменения состояния\n  setIsAuth(bool) {\n    this._isAuth = bool;\n  }\n  setUser(user) {\n    this._user = user;\n  }\n  setIsLoading(bool) {\n    this._isLoading = bool;\n  }\n\n  // Эффект для проверки авторизации\n  async checkAuth() {\n    this.setIsLoading(true);\n    try {\n      const data = await check_auth();\n      this.setUser(data);\n      this.setIsAuth(true);\n    } catch (e) {\n      console.log(\"Auth failed\");\n      this.setIsAuth(false);\n    } finally {\n      this.setIsLoading(false);\n    }\n  }\n\n  // Авторизация\n  async login(email, password) {\n    try {\n      const data = await login(email, password);\n      this.setUser(data);\n      this.setIsAuth(true);\n    } catch (e) {\n      console.log(\"Login failed\");\n      this.setIsAuth(false);\n    }\n  }\n\n  // Регистрация\n  async registration(name, email, password) {\n    try {\n      const data = await registration(name, email, password);\n      this.setUser(data);\n      this.setIsAuth(true);\n    } catch (e) {\n      console.log(\"Registration failed\");\n      this.setIsAuth(false);\n    }\n  }\n\n  // Логаут (выход)\n  logout() {\n    localStorage.removeItem(\"token\");\n    this.setUser({});\n    this.setIsAuth(false);\n  }\n\n  // Геттеры\n  get isAuth() {\n    return this._isAuth;\n  }\n  get user() {\n    return this._user;\n  }\n  get isLoading() {\n    return this._isLoading;\n  }\n}\nexport default new UserStore();","map":{"version":3,"names":["makeAutoObservable","login","registration","check_auth","UserStore","constructor","_isAuth","_user","setIsAuth","bool","setUser","user","setIsLoading","_isLoading","checkAuth","data","e","console","log","email","password","name","logout","localStorage","removeItem","isAuth","isLoading"],"sources":["C:/Users/redmi/Desktop/autoparts-shop/frontend/src/store/UserStore.js"],"sourcesContent":["// // для работы с mobx\r\n// import { makeAutoObservable } from \"mobx\";\r\n\r\n// export default class UserStore {\r\n//   constructor() {\r\n//     this._isAuth = false; // _ - переменная изменяться не может\r\n//     this._user = {};\r\n//     makeAutoObservable(this);\r\n//   }\r\n\r\n//   // экшены - функции изменяющие состояние\r\n//   setIsAuth(bool) {\r\n//     this._isAuth = bool;\r\n//   }\r\n//   setUser(user) {\r\n//     this._user = user;\r\n//   }\r\n\r\n//   // для получения переменных из нашего состояния\r\n//   // это computed функции, которые вызываются только в том случае, если переменная используемая внутри была изменена (из appRouter)\r\n//   get isAuth() {\r\n//     return this._isAuth;\r\n//   }\r\n\r\n//   get user() {\r\n//     return this._user;\r\n//   }\r\n// }\r\n\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { login, registration, check_auth } from \"../http/userAPI\";\r\n\r\nclass UserStore {\r\n  constructor() {\r\n    this._isAuth = false; // _ - переменная изменяться не может\r\n    this._user = {};\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  // Функции для изменения состояния\r\n  setIsAuth(bool) {\r\n    this._isAuth = bool;\r\n  }\r\n\r\n  setUser(user) {\r\n    this._user = user;\r\n  }\r\n\r\n  setIsLoading(bool) {\r\n    this._isLoading = bool;\r\n  }\r\n\r\n  // Эффект для проверки авторизации\r\n  async checkAuth() {\r\n    this.setIsLoading(true);\r\n    try {\r\n      const data = await check_auth();\r\n      this.setUser(data);\r\n      this.setIsAuth(true);\r\n    } catch (e) {\r\n      console.log(\"Auth failed\");\r\n      this.setIsAuth(false);\r\n    } finally {\r\n      this.setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  // Авторизация\r\n  async login(email, password) {\r\n    try {\r\n      const data = await login(email, password);\r\n      this.setUser(data);\r\n      this.setIsAuth(true);\r\n    } catch (e) {\r\n      console.log(\"Login failed\");\r\n      this.setIsAuth(false);\r\n    }\r\n  }\r\n\r\n  // Регистрация\r\n  async registration(name, email, password) {\r\n    try {\r\n      const data = await registration(name, email, password);\r\n      this.setUser(data);\r\n      this.setIsAuth(true);\r\n    } catch (e) {\r\n      console.log(\"Registration failed\");\r\n      this.setIsAuth(false);\r\n    }\r\n  }\r\n\r\n  // Логаут (выход)\r\n  logout() {\r\n    localStorage.removeItem(\"token\");\r\n    this.setUser({});\r\n    this.setIsAuth(false);\r\n  }\r\n\r\n  // Геттеры\r\n  get isAuth() {\r\n    return this._isAuth;\r\n  }\r\n\r\n  get user() {\r\n    return this._user;\r\n  }\r\n\r\n  get isLoading() {\r\n    return this._isLoading;\r\n  }\r\n}\r\n\r\nexport default new UserStore();\r\n"],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAASA,kBAAkB,QAAQ,MAAM;AACzC,SAASC,KAAK,EAAEC,YAAY,EAAEC,UAAU,QAAQ,iBAAiB;AAEjE,MAAMC,SAAS,CAAC;EACdC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,OAAO,GAAG,KAAK,CAAC,CAAC;IACtB,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC;IACfP,kBAAkB,CAAC,IAAI,CAAC;EAC1B;;EAEA;EACAQ,SAASA,CAACC,IAAI,EAAE;IACd,IAAI,CAACH,OAAO,GAAGG,IAAI;EACrB;EAEAC,OAAOA,CAACC,IAAI,EAAE;IACZ,IAAI,CAACJ,KAAK,GAAGI,IAAI;EACnB;EAEAC,YAAYA,CAACH,IAAI,EAAE;IACjB,IAAI,CAACI,UAAU,GAAGJ,IAAI;EACxB;;EAEA;EACA,MAAMK,SAASA,CAAA,EAAG;IAChB,IAAI,CAACF,YAAY,CAAC,IAAI,CAAC;IACvB,IAAI;MACF,MAAMG,IAAI,GAAG,MAAMZ,UAAU,CAAC,CAAC;MAC/B,IAAI,CAACO,OAAO,CAACK,IAAI,CAAC;MAClB,IAAI,CAACP,SAAS,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOQ,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1B,IAAI,CAACV,SAAS,CAAC,KAAK,CAAC;IACvB,CAAC,SAAS;MACR,IAAI,CAACI,YAAY,CAAC,KAAK,CAAC;IAC1B;EACF;;EAEA;EACA,MAAMX,KAAKA,CAACkB,KAAK,EAAEC,QAAQ,EAAE;IAC3B,IAAI;MACF,MAAML,IAAI,GAAG,MAAMd,KAAK,CAACkB,KAAK,EAAEC,QAAQ,CAAC;MACzC,IAAI,CAACV,OAAO,CAACK,IAAI,CAAC;MAClB,IAAI,CAACP,SAAS,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOQ,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC3B,IAAI,CAACV,SAAS,CAAC,KAAK,CAAC;IACvB;EACF;;EAEA;EACA,MAAMN,YAAYA,CAACmB,IAAI,EAAEF,KAAK,EAAEC,QAAQ,EAAE;IACxC,IAAI;MACF,MAAML,IAAI,GAAG,MAAMb,YAAY,CAACmB,IAAI,EAAEF,KAAK,EAAEC,QAAQ,CAAC;MACtD,IAAI,CAACV,OAAO,CAACK,IAAI,CAAC;MAClB,IAAI,CAACP,SAAS,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOQ,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClC,IAAI,CAACV,SAAS,CAAC,KAAK,CAAC;IACvB;EACF;;EAEA;EACAc,MAAMA,CAAA,EAAG;IACPC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;IAChC,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,CAAC;IAChB,IAAI,CAACF,SAAS,CAAC,KAAK,CAAC;EACvB;;EAEA;EACA,IAAIiB,MAAMA,CAAA,EAAG;IACX,OAAO,IAAI,CAACnB,OAAO;EACrB;EAEA,IAAIK,IAAIA,CAAA,EAAG;IACT,OAAO,IAAI,CAACJ,KAAK;EACnB;EAEA,IAAImB,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAACb,UAAU;EACxB;AACF;AAEA,eAAe,IAAIT,SAAS,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}