{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nexport default class CartStore {\n  constructor() {\n    this._cartItems = [];\n    this._cart = null;\n    makeAutoObservable(this);\n  }\n\n  // Экшены\n  // иициализация, добавление в стор\n  setCartItems(items) {\n    this._cartItems = items.map(item => ({\n      id: item.id,\n      cart_id: item.cart_id,\n      product_id: item.product_id,\n      quantity: item.quantity\n    }));\n  }\n\n  // для обновления количества товара в корзине\n  updateItemQuantity(productId, quantity) {\n    const itemIndex = this._cartItems.findIndex(item => item.product_id === productId);\n    if (itemIndex !== -1) {\n      if (quantity > 0) {\n        const updatedItems = [...this._cartItems];\n        updatedItems[itemIndex].quantity = quantity;\n        this.setCartItems(updatedItems);\n      } else {\n        // Удаляем товар, если количество стало 0\n        const filteredItems = this._cartItems.filter(item => item.product_id !== productId);\n        this.setCartItems(filteredItems);\n      }\n    }\n  }\n\n  // Удаление одного товара по productId\n  removeItem(productId) {\n    this._cartItems = this._cartItems.filter(item => item.product_id !== productId);\n  }\n\n  // Очистка всей корзины\n  clearCartItems() {\n    this._cartItems = [];\n  }\n  setCart(cart) {\n    this._cart = {\n      id: cart.id,\n      user_id: cart.user_id\n    };\n  }\n\n  // Геттеры\n  get cart() {\n    return this._cart;\n  }\n  get cartItems() {\n    return this._cartItems;\n  }\n}","map":{"version":3,"names":["makeAutoObservable","CartStore","constructor","_cartItems","_cart","setCartItems","items","map","item","id","cart_id","product_id","quantity","updateItemQuantity","productId","itemIndex","findIndex","updatedItems","filteredItems","filter","removeItem","clearCartItems","setCart","cart","user_id","cartItems"],"sources":["C:/Users/redmi/Desktop/autoparts-shop/frontend/src/store/CartStore.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\r\n\r\nexport default class CartStore {\r\n  constructor() {\r\n    this._cartItems = [];\r\n    this._cart = null;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  // Экшены\r\n  // иициализация, добавление в стор\r\n  setCartItems(items) {\r\n    this._cartItems = items.map((item) => ({\r\n      id: item.id,\r\n      cart_id: item.cart_id,\r\n      product_id: item.product_id,\r\n      quantity: item.quantity,\r\n    }));\r\n  }\r\n\r\n  // для обновления количества товара в корзине\r\n  updateItemQuantity(productId, quantity) {\r\n    const itemIndex = this._cartItems.findIndex((item) => item.product_id === productId);\r\n    if (itemIndex !== -1) {\r\n      if (quantity > 0) {\r\n        const updatedItems = [...this._cartItems];\r\n        updatedItems[itemIndex].quantity = quantity;\r\n        this.setCartItems(updatedItems);\r\n      } else {\r\n        // Удаляем товар, если количество стало 0\r\n        const filteredItems = this._cartItems.filter((item) => item.product_id !== productId);\r\n        this.setCartItems(filteredItems);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Удаление одного товара по productId\r\n  removeItem(productId) {\r\n    this._cartItems = this._cartItems.filter((item) => item.product_id !== productId);\r\n  }\r\n\r\n  // Очистка всей корзины\r\n  clearCartItems() {\r\n    this._cartItems = [];\r\n  }\r\n\r\n  setCart(cart) {\r\n    this._cart = {\r\n      id: cart.id,\r\n      user_id: cart.user_id,\r\n    };\r\n  }\r\n\r\n  // Геттеры\r\n  get cart() {\r\n    return this._cart;\r\n  }\r\n\r\n  get cartItems() {\r\n    return this._cartItems;\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,MAAM;AAEzC,eAAe,MAAMC,SAAS,CAAC;EAC7BC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjBJ,kBAAkB,CAAC,IAAI,CAAC;EAC1B;;EAEA;EACA;EACAK,YAAYA,CAACC,KAAK,EAAE;IAClB,IAAI,CAACH,UAAU,GAAGG,KAAK,CAACC,GAAG,CAAEC,IAAI,KAAM;MACrCC,EAAE,EAAED,IAAI,CAACC,EAAE;MACXC,OAAO,EAAEF,IAAI,CAACE,OAAO;MACrBC,UAAU,EAAEH,IAAI,CAACG,UAAU;MAC3BC,QAAQ,EAAEJ,IAAI,CAACI;IACjB,CAAC,CAAC,CAAC;EACL;;EAEA;EACAC,kBAAkBA,CAACC,SAAS,EAAEF,QAAQ,EAAE;IACtC,MAAMG,SAAS,GAAG,IAAI,CAACZ,UAAU,CAACa,SAAS,CAAER,IAAI,IAAKA,IAAI,CAACG,UAAU,KAAKG,SAAS,CAAC;IACpF,IAAIC,SAAS,KAAK,CAAC,CAAC,EAAE;MACpB,IAAIH,QAAQ,GAAG,CAAC,EAAE;QAChB,MAAMK,YAAY,GAAG,CAAC,GAAG,IAAI,CAACd,UAAU,CAAC;QACzCc,YAAY,CAACF,SAAS,CAAC,CAACH,QAAQ,GAAGA,QAAQ;QAC3C,IAAI,CAACP,YAAY,CAACY,YAAY,CAAC;MACjC,CAAC,MAAM;QACL;QACA,MAAMC,aAAa,GAAG,IAAI,CAACf,UAAU,CAACgB,MAAM,CAAEX,IAAI,IAAKA,IAAI,CAACG,UAAU,KAAKG,SAAS,CAAC;QACrF,IAAI,CAACT,YAAY,CAACa,aAAa,CAAC;MAClC;IACF;EACF;;EAEA;EACAE,UAAUA,CAACN,SAAS,EAAE;IACpB,IAAI,CAACX,UAAU,GAAG,IAAI,CAACA,UAAU,CAACgB,MAAM,CAAEX,IAAI,IAAKA,IAAI,CAACG,UAAU,KAAKG,SAAS,CAAC;EACnF;;EAEA;EACAO,cAAcA,CAAA,EAAG;IACf,IAAI,CAAClB,UAAU,GAAG,EAAE;EACtB;EAEAmB,OAAOA,CAACC,IAAI,EAAE;IACZ,IAAI,CAACnB,KAAK,GAAG;MACXK,EAAE,EAAEc,IAAI,CAACd,EAAE;MACXe,OAAO,EAAED,IAAI,CAACC;IAChB,CAAC;EACH;;EAEA;EACA,IAAID,IAAIA,CAAA,EAAG;IACT,OAAO,IAAI,CAACnB,KAAK;EACnB;EAEA,IAAIqB,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAACtB,UAAU;EACxB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}