{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\redmi\\\\Desktop\\\\autoparts-shop\\\\frontend\\\\src\\\\pages\\\\cart.js\",\n  _s = $RefreshSig$();\n// import React, { useContext } from \"react\";\n// import { Container, Row, Col, Card, Button, Image, ListGroup } from \"react-bootstrap\";\n// import { Context } from \"../index\";\n\n// const Cart = () => {\n//   const { cart } = useContext(Context);\n//   const { product } = useContext(Context);\n\n//   const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n\n//   return (\n//     <Container className=\"mt-4\">\n//       <h2 className=\"text-center mb-4\">Товары пользователя</h2>\n\n//       <Row className=\"justify-content-center\">\n//         {cartItems.map((item) => (\n//           <Col key={item.id} md={4} className=\"d-flex mb-4\">\n//             <Card className=\"w-100 border-secondary\">\n//               <Image\n//                 src={item.image}\n//                 alt={item.name}\n//                 style={{ width: \"100%\", height: 200, borderRadius: 10 }}\n//                 className=\"p-2\"\n//               />\n//               <Card.Body className=\"d-flex flex-column\">\n//                 <Card.Title className=\"mb-1\">{item.name}</Card.Title>\n//                 <Card.Text className=\"flex-grow-1\">\n//                   <strong>Описание:</strong> {item.description}\n//                   <br />\n//                   <strong>Цена:</strong> {item.price} ₽\n//                   <br />\n//                   <strong>В наличии:</strong> {item.stock} шт.\n//                 </Card.Text>\n\n//                 <div className=\"d-flex align-items-center justify-content-center my-2\">\n//                   <Button variant=\"outline-danger\" size=\"sm\" className=\"me-2\">\n//                     -\n//                   </Button>\n//                   <span>{item.quantity}</span>\n//                   <Button variant=\"outline-success\" size=\"sm\" className=\"ms-2\">\n//                     +\n//                   </Button>\n//                 </div>\n//               </Card.Body>\n//             </Card>\n//           </Col>\n//         ))}\n//       </Row>\n\n//       <Card className=\"p-4 mt-4 text-center\">\n//         <h4>Итого: {totalPrice} ₽</h4>\n//         <div className=\"mt-3 d-flex justify-content-center gap-3\">\n//           <Button variant=\"outline-danger\">Очистить корзину</Button>\n//           <Button variant=\"success\">Создать заказ</Button>\n//         </div>\n//       </Card>\n//     </Container>\n//   );\n// };\n\n// export default Cart;\n\nimport React, { useContext, useEffect } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { Container, Row, Col, Card, Image } from \"react-bootstrap\";\nimport { Context } from \"../index\";\nimport { getCart } from \"../http/cart_cartitemAPI\"; // функция получения корзины\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cart = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    cart,\n    product\n  } = useContext(Context);\n  const cartItems = cart.cartItems || [];\n  const products = product.product || [];\n\n  // Получение корзины при монтировании\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        const data = await getCart(); // получаем корзину с CartItems и Product\n        cart.setCart(data); // сохраняем только id и user_id\n        cart.setCartItems(data.CartItems); // сохраняем только cartItems\n      } catch (error) {\n        console.error(\"Ошибка при загрузке корзины:\", error);\n      }\n    };\n    fetchCart();\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u0412\\u0430\\u0448\\u0430 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this) : cartItems.map(item => {\n        const productDetails = products.find(prod => prod.id === item.product_id);\n        if (!productDetails) return null;\n        return /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          className: \"d-flex mb-4\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"w-100 border-secondary\",\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              src: process.env.REACT_APP_API_URL + productDetails.image,\n              alt: productDetails.name,\n              style: {\n                width: \"100%\",\n                height: 200,\n                objectFit: \"contain\",\n                borderRadius: 10\n              },\n              className: \"p-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              className: \"d-flex flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                className: \"mb-1\",\n                children: productDetails.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                className: \"flex-grow-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 23\n                }, this), \" \", productDetails.description, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0426\\u0435\\u043D\\u0430:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 23\n                }, this), \" \", productDetails.price, \" \\u20BD\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 23\n                }, this), \" \", item.quantity, \" \\u0448\\u0442.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this)\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}, \"gi/0P9XvF1ygxU2GKzNa1HJkuNA=\")), \"gi/0P9XvF1ygxU2GKzNa1HJkuNA=\");\n_c2 = Cart;\nexport default Cart;\nvar _c, _c2;\n$RefreshReg$(_c, \"Cart$observer\");\n$RefreshReg$(_c2, \"Cart\");","map":{"version":3,"names":["React","useContext","useEffect","observer","Container","Row","Col","Card","Image","Context","getCart","jsxDEV","_jsxDEV","Cart","_s","_c","cart","product","cartItems","products","fetchCart","data","setCart","setCartItems","CartItems","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","productDetails","find","prod","id","product_id","md","src","process","env","REACT_APP_API_URL","image","alt","name","style","width","height","objectFit","borderRadius","Body","Title","Text","description","price","quantity","_c2","$RefreshReg$"],"sources":["C:/Users/redmi/Desktop/autoparts-shop/frontend/src/pages/cart.js"],"sourcesContent":["// import React, { useContext } from \"react\";\r\n// import { Container, Row, Col, Card, Button, Image, ListGroup } from \"react-bootstrap\";\r\n// import { Context } from \"../index\";\r\n\r\n// const Cart = () => {\r\n//   const { cart } = useContext(Context);\r\n//   const { product } = useContext(Context);\r\n\r\n//   const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n\r\n//   return (\r\n//     <Container className=\"mt-4\">\r\n//       <h2 className=\"text-center mb-4\">Товары пользователя</h2>\r\n\r\n//       <Row className=\"justify-content-center\">\r\n//         {cartItems.map((item) => (\r\n//           <Col key={item.id} md={4} className=\"d-flex mb-4\">\r\n//             <Card className=\"w-100 border-secondary\">\r\n//               <Image\r\n//                 src={item.image}\r\n//                 alt={item.name}\r\n//                 style={{ width: \"100%\", height: 200, borderRadius: 10 }}\r\n//                 className=\"p-2\"\r\n//               />\r\n//               <Card.Body className=\"d-flex flex-column\">\r\n//                 <Card.Title className=\"mb-1\">{item.name}</Card.Title>\r\n//                 <Card.Text className=\"flex-grow-1\">\r\n//                   <strong>Описание:</strong> {item.description}\r\n//                   <br />\r\n//                   <strong>Цена:</strong> {item.price} ₽\r\n//                   <br />\r\n//                   <strong>В наличии:</strong> {item.stock} шт.\r\n//                 </Card.Text>\r\n\r\n//                 <div className=\"d-flex align-items-center justify-content-center my-2\">\r\n//                   <Button variant=\"outline-danger\" size=\"sm\" className=\"me-2\">\r\n//                     -\r\n//                   </Button>\r\n//                   <span>{item.quantity}</span>\r\n//                   <Button variant=\"outline-success\" size=\"sm\" className=\"ms-2\">\r\n//                     +\r\n//                   </Button>\r\n//                 </div>\r\n//               </Card.Body>\r\n//             </Card>\r\n//           </Col>\r\n//         ))}\r\n//       </Row>\r\n\r\n//       <Card className=\"p-4 mt-4 text-center\">\r\n//         <h4>Итого: {totalPrice} ₽</h4>\r\n//         <div className=\"mt-3 d-flex justify-content-center gap-3\">\r\n//           <Button variant=\"outline-danger\">Очистить корзину</Button>\r\n//           <Button variant=\"success\">Создать заказ</Button>\r\n//         </div>\r\n//       </Card>\r\n//     </Container>\r\n//   );\r\n// };\r\n\r\n// export default Cart;\r\n\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Container, Row, Col, Card, Image } from \"react-bootstrap\";\r\nimport { Context } from \"../index\";\r\nimport { getCart } from \"../http/cart_cartitemAPI\"; // функция получения корзины\r\n\r\nconst Cart = observer(() => {\r\n  const { cart, product } = useContext(Context);\r\n\r\n  const cartItems = cart.cartItems || [];\r\n  const products = product.product || [];\r\n\r\n  // Получение корзины при монтировании\r\n  useEffect(() => {\r\n    const fetchCart = async () => {\r\n      try {\r\n        const data = await getCart(); // получаем корзину с CartItems и Product\r\n        cart.setCart(data); // сохраняем только id и user_id\r\n        cart.setCartItems(data.CartItems); // сохраняем только cartItems\r\n      } catch (error) {\r\n        console.error(\"Ошибка при загрузке корзины:\", error);\r\n      }\r\n    };\r\n\r\n    fetchCart();\r\n  }, [cart]);\r\n\r\n  return (\r\n    <Container className=\"mt-4\">\r\n      <h2 className=\"text-center mb-4\">Товары в корзине</h2>\r\n\r\n      <Row className=\"justify-content-center\">\r\n        {cartItems.length === 0 ? (\r\n          <div className=\"text-center\">\r\n            <h4>Ваша корзина пуста</h4>\r\n          </div>\r\n        ) : (\r\n          cartItems.map((item) => {\r\n            const productDetails = products.find((prod) => prod.id === item.product_id);\r\n            if (!productDetails) return null;\r\n\r\n            return (\r\n              <Col key={item.id} md={4} className=\"d-flex mb-4\">\r\n                <Card className=\"w-100 border-secondary\">\r\n                  <Image\r\n                    src={process.env.REACT_APP_API_URL + productDetails.image}\r\n                    alt={productDetails.name}\r\n                    style={{ width: \"100%\", height: 200, objectFit: \"contain\", borderRadius: 10 }}\r\n                    className=\"p-2\"\r\n                  />\r\n                  <Card.Body className=\"d-flex flex-column\">\r\n                    <Card.Title className=\"mb-1\">{productDetails.name}</Card.Title>\r\n                    <Card.Text className=\"flex-grow-1\">\r\n                      <strong>Описание:</strong> {productDetails.description}\r\n                      <br />\r\n                      <strong>Цена:</strong> {productDetails.price} ₽\r\n                      <br />\r\n                      <strong>Количество:</strong> {item.quantity} шт.\r\n                    </Card.Text>\r\n                  </Card.Body>\r\n                </Card>\r\n              </Col>\r\n            );\r\n          })\r\n        )}\r\n      </Row>\r\n    </Container>\r\n  );\r\n});\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}